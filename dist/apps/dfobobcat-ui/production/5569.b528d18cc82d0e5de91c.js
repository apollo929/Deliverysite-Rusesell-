(self.webpackChunkdfobobcat=self.webpackChunkdfobobcat||[]).push([[5569],{5569:(e,o,t)=>{"use strict";t.r(o),t.d(o,{SignupPageModule:()=>x});var n=t(2057),s=t(3738),i=t(3498),r=t(8535),c=t(4762),a=t(4705),l=t(7422),p=t(8002),d=t(3342),u=t(793),m=t(4694);function h(e,o){if(1&e){const e=u.EpF();u.TgZ(0,"bc-select",11),u.NdJ("selected",function(o){return u.CHM(e),u.oxw().companySelected(o)}),u.qZA()}if(2&e){const e=o.ngIf,t=u.oxw();u.Q6J("options",e)("control",t.company)("readonly",!1)}}function g(e,o){if(1&e){const e=u.EpF();u.TgZ(0,"ion-icon",12),u.NdJ("click",function(){return u.CHM(e),u.oxw().switchPasswordVisible()}),u.qZA()}}function f(e,o){if(1&e){const e=u.EpF();u.TgZ(0,"ion-icon",13),u.NdJ("click",function(){return u.CHM(e),u.oxw().switchPasswordVisible()}),u.qZA()}}function b(e,o){if(1&e){const e=u.EpF();u.TgZ(0,"ion-icon",12),u.NdJ("click",function(){return u.CHM(e),u.oxw().switchPasswordVisible()}),u.qZA()}}function w(e,o){if(1&e){const e=u.EpF();u.TgZ(0,"ion-icon",13),u.NdJ("click",function(){return u.CHM(e),u.oxw().switchPasswordVisible()}),u.qZA()}}const y=[{path:"",component:(()=>{class e{constructor(e,o,t,n){this.fb=e,this.registerGQL=o,this.alertService=t,this.companiesGql=n,this.passwordType="password",this.showPassword=!1,this.companies$=this.companiesGql.fetch().pipe((0,p.U)(e=>{var o;return null===(o=e.data)||void 0===o?void 0:o.companies}),(0,p.U)(e=>e?e.reduce((e,o)=>(e[o.id]=o.name,e),{}):{})),this.form=this.fb.group({name:["",[s.kI.required]],email:["",[s.kI.required,s.kI.email]],password:["",[s.kI.required,s.kI.minLength(8)]],repeatPassword:["",s.kI.required],company:["",[s.kI.required]]},{validator:e=>{var o,t;return(null===(o=e.get("password"))||void 0===o?void 0:o.value)===(null===(t=e.get("repeatPassword"))||void 0===t?void 0:t.value)?null:{repeatPassword:!0}}})}get company(){return this.form.controls.company}companySelected(e){}onSubmit(){if(this.form.hasError("repeatPassword"))return void this.alertService.show({type:"error",message:"Passwords do not match!"}).subscribe();if(this.form.invalid){for(const e of Object.keys(this.form.controls))this.form.controls[e].markAsDirty();return}const e=(0,c._T)(this.form.value,["repeatPassword"]);this.registerGQL.mutate({input:e}).pipe((0,d.b)(()=>{this.form.reset()})).subscribe(()=>{this.alertService.show({message:"We sent an email with verification link to your email address"}).subscribe()})}switchPasswordVisible(){this.passwordType="text"===this.passwordType?"password":"text",this.showPassword=!this.showPassword}}return e.\u0275fac=function(o){return new(o||e)(u.Y36(s.qu),u.Y36(a._T),u.Y36(l.c9),u.Y36(a.Gy))},e.\u0275cmp=u.Xpm({type:e,selectors:[["bc-signup-page"]],decls:18,vars:17,consts:[["action","",3,"submit"],["theme","light","placeholder","Write your full name",3,"control","label"],["theme","light","placeholder","Write your e-mail",3,"control","label"],["placeholder","Select company","label","Builder company","theme","light","inputBackground","#004853",3,"options","control","readonly","selected",4,"ngIf"],["theme","light","placeholder","Write your password",3,"type","control","label"],["class","eye-icon","src","/assets/icon/eye-opened.svg",3,"click",4,"ngIf"],["class","eye-icon","src","/assets/icon/eye-closed.svg",3,"click",4,"ngIf"],["theme","light","placeholder","Repeat your password","enterkeyhint","send",3,"type","control","label","keyup.enter"],[2,"flex","1 0 auto"],["type","submit","expand","block","size","large","shape","round",1,"main-action-btn"],["slot","start","src","/assets/icon/send.svg"],["placeholder","Select company","label","Builder company","theme","light","inputBackground","#004853",3,"options","control","readonly","selected"],["src","/assets/icon/eye-opened.svg",1,"eye-icon",3,"click"],["src","/assets/icon/eye-closed.svg",1,"eye-icon",3,"click"]],template:function(e,o){1&e&&(u.TgZ(0,"h1"),u._uU(1,"Sign up"),u.qZA(),u.TgZ(2,"form",0),u.NdJ("submit",function(){return o.onSubmit()}),u._UZ(3,"bc-input",1),u._UZ(4,"bc-input",2),u.YNc(5,h,1,3,"bc-select",3),u.ALo(6,"async"),u.TgZ(7,"bc-input",4),u.YNc(8,g,1,0,"ion-icon",5),u.YNc(9,f,1,0,"ion-icon",6),u.qZA(),u.TgZ(10,"bc-input",7),u.NdJ("keyup.enter",function(){return o.onSubmit()}),u.YNc(11,b,1,0,"ion-icon",5),u.YNc(12,w,1,0,"ion-icon",6),u.qZA(),u._UZ(13,"div",8),u.TgZ(14,"ion-button",9),u._UZ(15,"ion-icon",10),u.TgZ(16,"span"),u._uU(17,"sign up"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(3),u.Q6J("control",o.form.controls.name)("label","Name"),u.xp6(1),u.Q6J("control",o.form.controls.email)("label","Email"),u.xp6(1),u.Q6J("ngIf",u.lcZ(6,15,o.companies$)),u.xp6(2),u.Q6J("type",o.passwordType)("control",o.form.controls.password)("label","Password"),u.xp6(1),u.Q6J("ngIf",o.showPassword),u.xp6(1),u.Q6J("ngIf",!o.showPassword),u.xp6(1),u.Q6J("type",o.passwordType)("control",o.form.controls.repeatPassword)("label","Repeat Password"),u.xp6(1),u.Q6J("ngIf",o.showPassword),u.xp6(1),u.Q6J("ngIf",!o.showPassword))},directives:[s._Y,s.JL,s.F,m.am,n.O5,i.YG,i.gu,m.Hr],pipes:[n.Ov],styles:["[_nghost-%COMP%]{background-color:transparent;display:flex;flex-direction:column;height:100%}form[_ngcontent-%COMP%]{min-height:100%;display:flex;padding:16px 0 39px;flex-direction:column}bc-select[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   bc-input[_ngcontent-%COMP%]:not(:last-of-type), form[_ngcontent-%COMP%]   bc-select[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:35px;display:block}h1[_ngcontent-%COMP%]{margin-bottom:27px}.forgot-password[_ngcontent-%COMP%]{display:block;margin-top:16px}ion-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:28px}ion-button[type=submit][_ngcontent-%COMP%]{font-weight:500}ion-button[type=submit][_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-bottom:-5px}.main-action-btn[_ngcontent-%COMP%]{margin-top:48px}"]}),e})()}];let P=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[r.Bz.forChild(y)],r.Bz]}),e})();var k=t(5967);let x=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[n.ez,s.u5,i.Pc,P,k.C]]}),e})()}}]);