(self.webpackChunkdfobobcat=self.webpackChunkdfobobcat||[]).push([[8579],{2348:(t,e,o)=>{"use strict";o.r(e),o.d(e,{UiAdminUsersModule:()=>zt});var n=o(2057),s=o(3498),i=o(8535),a=o(4762),c=o(793),r=o(6215),l=o(9765),d=o(739),p=o(4402),g=o(4705),u=o(7472),h=o(2414),f=o(6782),m=o(3190),b=o(5257),w=o(4612),x=o(8002),y=o(3342),Z=o(4689),v=o(7422),k=o(3738),P=o(4694);function C(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"bc-select",16),c.NdJ("selected",function(e){return c.CHM(t),c.oxw().companySelected(e)}),c.qZA()}if(2&t){const t=e.ngIf,o=c.oxw();c.Q6J("options",t)("control",o.company)("readonly",!1)}}function _(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-icon",20),c.NdJ("click",function(){return c.CHM(t),c.oxw(2).switchPasswordVisible()}),c.qZA()}}function A(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-icon",21),c.NdJ("click",function(){return c.CHM(t),c.oxw(2).switchPasswordVisible()}),c.qZA()}}function O(t,e){if(1&t&&(c.TgZ(0,"bc-input",17),c.YNc(1,_,1,0,"ion-icon",18),c.YNc(2,A,1,0,"ion-icon",19),c.qZA()),2&t){const t=c.oxw();c.Q6J("type",t.passwordType)("control",t.form.controls.password)("label","Password"),c.xp6(1),c.Q6J("ngIf",t.showPassword),c.xp6(1),c.Q6J("ngIf",!t.showPassword)}}function q(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-icon",20),c.NdJ("click",function(){return c.CHM(t),c.oxw(2).switchPasswordVisible()}),c.qZA()}}function T(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-icon",21),c.NdJ("click",function(){return c.CHM(t),c.oxw(2).switchPasswordVisible()}),c.qZA()}}function M(t,e){if(1&t&&(c.TgZ(0,"bc-input",22),c.YNc(1,q,1,0,"ion-icon",18),c.YNc(2,T,1,0,"ion-icon",19),c.qZA()),2&t){const t=c.oxw();c.Q6J("type",t.passwordType)("control",t.form.controls.repeatPassword)("label","Repeat Password"),c.xp6(1),c.Q6J("ngIf",t.showPassword),c.xp6(1),c.Q6J("ngIf",!t.showPassword)}}function I(t,e){1&t&&(c.TgZ(0,"div",23),c._uU(1," Passwords do not match! "),c.qZA())}function D(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-button",13),c.NdJ("click",function(){return c.CHM(t),c.oxw().copyPassword()}),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"async"),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,1,t.copyPasswordText$))}}let N=(()=>{class t{constructor(t,e,o,n,s,i,a,c,d){this.fb=t,this.dialogData=e,this.userGQL=o,this.staffRolesGQL=n,this.updateUserGQL=s,this.registerGQL=i,this.alertService=a,this.passwordGenerator=c,this.companiesGql=d,this.close=new l.xQ,this.passwordType="password",this.showPassword=!1,this.copyPasswordText$=new r.X("copy password"),this.showCopyPassword$=new r.X(!1),this.destroy$=new l.xQ,this.companies$=this.companiesGql.fetch().pipe((0,x.U)(t=>{var e;return null===(e=t.data)||void 0===e?void 0:e.companies}),(0,x.U)(t=>t?t.reduce((t,e)=>(t[e.id]=e.name,t),{}):{})),this.form=t.group({name:["",[k.kI.required]],email:["",[k.kI.required]],password:[],repeatPassword:[],company:["",[k.kI.required]]},{validator:t=>{var e,o;return(null===(e=t.get("password"))||void 0===e?void 0:e.value)===(null===(o=t.get("repeatPassword"))||void 0===o?void 0:o.value)?null:{repeatPassword:!0}}})}get company(){return this.form.controls.company}companySelected(t){}ngOnDestroy(){this.destroy$.next()}ngOnInit(){if(this.dialogData.staffId)this.userGQL.fetch({id:this.dialogData.staffId}).subscribe(t=>{const e=t.data.user,{company:o}=e,n=(0,a._T)(e,["role","company"]);this.form.patchValue(Object.assign({company:null==o?void 0:o.name},n))});else{const t=this.passwordGenerator.generate();this.showCopyPassword$.next(!0),this.form.controls.password.valueChanges.pipe((0,f.R)(this.destroy$)).subscribe(()=>this.copyPasswordText$.next("copy password")),this.form.controls.password.setValidators([k.kI.required]),this.form.controls.repeatPassword.setValidators([k.kI.required]),this.form.patchValue({password:t,repeatPassword:t})}}submit(){if(this.form.invalid){for(const t of Object.keys(this.form.controls))this.form.controls[t].markAsDirty();return}const t=this.form.value;if(this.dialogData.staffId)this.updateUserGQL.mutate({input:{email:t.email,name:t.name,userId:this.dialogData.staffId,company:t.company}}).subscribe(()=>{this.close.next(!0)});else{if(this.form.hasError("repeatPassword"))return;this.registerGQL.mutate({input:{email:t.email,name:t.name,userId:this.dialogData.staffId,company:t.company,password:t.password,roleId:1}}).subscribe(()=>{this.close.next(!0)})}}switchPasswordVisible(){this.passwordType="text"===this.passwordType?"password":"text",this.showPassword=!this.showPassword}copyPassword(){this.alertService.show({type:"error",message:"Passwords do not match!"}).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(k.qu),c.Y36(Z.ro),c.Y36(g.dH),c.Y36(g.N4),c.Y36(g.h4),c.Y36(g.JD),c.Y36(v.c9),c.Y36(v.Tz),c.Y36(g.Gy))},t.\u0275cmp=c.Xpm({type:t,selectors:[["dfobobcat-add-builder-dialog"]],decls:25,vars:13,consts:[[1,"dialog-container"],[1,"dialog-header"],[2,"flex","1 0 auto"],["src","/assets/icon/close.svg",3,"click"],[1,"dialog-body"],["placeholder","Builder name","label","Full name",3,"control"],["placeholder","Builder email","label","E-mail",3,"control"],["placeholder","Select company","label","Builder company","theme","light","inputBackground","#004853",3,"options","control","readonly","selected",4,"ngIf"],["theme","light","placeholder","Write your password",3,"type","control","label",4,"ngIf"],["theme","light","placeholder","Repeat your password","enterkeyhint","send",3,"type","control","label",4,"ngIf"],["class","form-error",4,"ngIf"],[1,"dialog-buttons"],["class","main-action-btn","type","button","expand","block","size","large","shape","round",3,"click",4,"ngIf"],["type","button","expand","block","size","large","shape","round",1,"main-action-btn",3,"click"],["slot","start","src","/assets/icon/users.svg",1,"dark"],["type","button","expand","block","size","large","shape","round",1,"main-action-btn","cancel-btn",3,"click"],["placeholder","Select company","label","Builder company","theme","light","inputBackground","#004853",3,"options","control","readonly","selected"],["theme","light","placeholder","Write your password",3,"type","control","label"],["class","eye-icon","src","/assets/icon/eye-opened.svg",3,"click",4,"ngIf"],["class","eye-icon","src","/assets/icon/eye-closed.svg",3,"click",4,"ngIf"],["src","/assets/icon/eye-opened.svg",1,"eye-icon",3,"click"],["src","/assets/icon/eye-closed.svg",1,"eye-icon",3,"click"],["theme","light","placeholder","Repeat your password","enterkeyhint","send",3,"type","control","label"],[1,"form-error"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"span"),c._uU(3),c.qZA(),c._UZ(4,"div",2),c.TgZ(5,"ion-icon",3),c.NdJ("click",function(){return e.close.next(!1)}),c.qZA(),c.qZA(),c.TgZ(6,"div",4),c._UZ(7,"bc-input",5),c._UZ(8,"bc-input",6),c.YNc(9,C,1,3,"bc-select",7),c.ALo(10,"async"),c.YNc(11,O,3,5,"bc-input",8),c.YNc(12,M,3,5,"bc-input",9),c.qZA(),c.YNc(13,I,2,0,"div",10),c._UZ(14,"div",2),c.TgZ(15,"div",11),c.YNc(16,D,4,3,"ion-button",12),c.ALo(17,"async"),c.TgZ(18,"ion-button",13),c.NdJ("click",function(){return e.submit()}),c._UZ(19,"ion-icon",14),c.TgZ(20,"span"),c._uU(21),c.qZA(),c.qZA(),c.TgZ(22,"ion-button",15),c.NdJ("click",function(){return e.close.next(!1)}),c.TgZ(23,"span"),c._uU(24,"cancel"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.hij("",null!=e.dialogData&&e.dialogData.staffId?"Edit user":"Add a new builder"," "),c.xp6(4),c.Q6J("control",e.form.controls.name),c.xp6(1),c.Q6J("control",e.form.controls.email),c.xp6(1),c.Q6J("ngIf",c.lcZ(10,9,e.companies$)),c.xp6(2),c.Q6J("ngIf",!e.dialogData||!e.dialogData.staffId),c.xp6(1),c.Q6J("ngIf",!e.dialogData||!e.dialogData.staffId),c.xp6(1),c.Q6J("ngIf",!e.dialogData.staffId&&e.form.hasError("repeatPassword")),c.xp6(3),c.Q6J("ngIf",c.lcZ(17,11,e.showCopyPassword$)),c.xp6(5),c.hij("",null!=e.dialogData&&e.dialogData.staffId?"edit":"add new"," builder"))},directives:[s.gu,P.am,n.O5,s.YG,P.Hr],pipes:[n.Ov],styles:[".dialog-container[_ngcontent-%COMP%]{min-height:723px;width:425px;background-color:#004853;color:#fff;padding:40px 28px 40px 48px;position:relative;border-radius:8px;display:flex;flex-flow:column nowrap}.dialog-header[_ngcontent-%COMP%]{margin-bottom:35px}bc-input[_ngcontent-%COMP%], bc-select[_ngcontent-%COMP%]{display:block;margin-bottom:22px}.dialog-header[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:center;border-bottom:1px solid #78909c;padding-bottom:15px}.dialog-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#78909c}.dialog-buttons[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap}.dialog-buttons[_ngcontent-%COMP%]:ion-button:first-of-type(){margin-bottom:16px}.main-action-btn[_ngcontent-%COMP%]{--padding-start:75px;--padding-end:75px;--padding-top:16px;--padding-bottom:16px}.main-action-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#000}.main-action-btn[_ngcontent-%COMP%]:native   ion-icon[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}.main-action-btn[_ngcontent-%COMP%]:native   ion-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#000}.main-action-btn[_ngcontent-%COMP%]:native   span[_ngcontent-%COMP%]{letter-spacing:.5px}.cancel-btn[_ngcontent-%COMP%]{--background:transparent;--border-color:var(--ion-color-primary);--border-width:1px;--border-style:solid;--color:var(--ion-color-primary)}"],changeDetection:0}),t})();var $=o(7586),U=o(6099),Y=o(3818);const Q=["componentWrapper"];function S(t,e){1&t&&(c.O4$(),c.TgZ(0,"svg",31),c._UZ(1,"path",32),c._UZ(2,"path",33),c.qZA())}function J(t,e){1&t&&(c.O4$(),c.TgZ(0,"svg",31),c._UZ(1,"path",32),c._UZ(2,"path",34),c.qZA())}function L(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"li",29),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw(2).changeSorting(e.key)}),c.ALo(1,"async"),c.TgZ(2,"span"),c._uU(3),c.qZA(),c.YNc(4,S,3,0,"svg",30),c.ALo(5,"async"),c.YNc(6,J,3,0,"svg",30),c.ALo(7,"async"),c.qZA()}if(2&t){const t=e.$implicit,o=c.oxw(2);c.ekj("active",c.lcZ(1,5,o.orderBy$)===t.key),c.xp6(3),c.Oqu(t.value),c.xp6(1),c.Q6J("ngIf",c.lcZ(5,7,o.orderDirection$)===o.ORDER_DIRECTION.ASC),c.xp6(2),c.Q6J("ngIf",c.lcZ(7,9,o.orderDirection$)===o.ORDER_DIRECTION.DESC)}}function R(t,e){if(1&t){const t=c.EpF();c.ynx(0),c.TgZ(1,"div",20),c.TgZ(2,"ul",21),c.YNc(3,L,8,11,"li",22),c.ALo(4,"keyvalue"),c.qZA(),c.TgZ(5,"div",23),c.O4$(),c.TgZ(6,"svg",24),c.NdJ("click",function(){const e=c.CHM(t).ngIf,o=c.oxw();return e.hasPreviousPage?o.paginate$.next(o.previousPage):null}),c._UZ(7,"path",25),c._UZ(8,"path",26),c.qZA(),c.TgZ(9,"svg",27),c.NdJ("click",function(){const e=c.CHM(t).ngIf,o=c.oxw();return e.hasNextPage?o.paginate$.next(o.nextPage):null}),c._UZ(10,"path",25),c._UZ(11,"path",28),c.qZA(),c.qZA(),c.qZA(),c.BQk()}if(2&t){const t=e.ngIf,o=c.oxw();c.xp6(3),c.Q6J("ngForOf",c.lcZ(4,5,o.orderKeys)),c.xp6(3),c.ekj("disabled",!t.hasPreviousPage),c.xp6(3),c.ekj("disabled",!t.hasNextPage)}}function B(t,e){1&t&&(c.TgZ(0,"th",35),c._uU(1,"Photo"),c.qZA())}function E(t,e){1&t&&(c.TgZ(0,"td",36),c.TgZ(1,"div",37),c._UZ(2,"ion-icon",38),c.qZA(),c.qZA())}function H(t,e){1&t&&(c.TgZ(0,"th",35),c._uU(1,"Name"),c.qZA())}function j(t,e){if(1&t&&(c.TgZ(0,"td",36),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.hij(" ",t.name," ")}}function z(t,e){1&t&&(c.TgZ(0,"th",35),c._uU(1,"E-Mail"),c.qZA())}function G(t,e){if(1&t&&(c.TgZ(0,"td",36),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.hij(" ",t.email," ")}}function F(t,e){1&t&&(c.TgZ(0,"th",35),c._uU(1,"Company"),c.qZA())}function V(t,e){if(1&t&&(c.TgZ(0,"td",36),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.hij(" ",null==t.company?null:t.company.name," ")}}function X(t,e){1&t&&(c.TgZ(0,"th",35),c._uU(1,"Phone"),c.qZA())}function W(t,e){1&t&&(c.TgZ(0,"td",36),c._uU(1,"61 2 1234 5678"),c.qZA())}function K(t,e){1&t&&c._UZ(0,"th",35)}function tt(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"td",36),c.TgZ(1,"ion-button",39),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().openEditStaffDialog(e.id)}),c._UZ(2,"ion-icon",40),c.TgZ(3,"span"),c._uU(4,"edit"),c.qZA(),c.qZA(),c.qZA()}}function et(t,e){1&t&&c._UZ(0,"th",35)}function ot(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"td",36),c.TgZ(1,"ion-button",39),c.NdJ("click",function(){const e=c.CHM(t),o=e.$implicit,n=e.index;return c.oxw().showDeleteAlert(o.id,o.name,n)}),c._UZ(2,"ion-icon",41),c.TgZ(3,"span"),c._uU(4,"delete"),c.qZA(),c.qZA(),c.qZA()}}function nt(t,e){1&t&&c._UZ(0,"tr",42)}function st(t,e){1&t&&c._UZ(0,"tr",43)}const it=function(t,e){return{hasPreviousPage:t,hasNextPage:e}};let at=(()=>{class t{constructor(t,e,o,n,s,i,a){this.usersGQL=t,this.deleteUserGQL=e,this.alertController=o,this.overlay=n,this.injector=s,this.alertService=i,this.searchService=a,this.dataSource$=new r.X([]),this.displayedColumns=["photo","name","email","company","edit","delete"],this.ORDER_DIRECTION=$.H,this.orderKeys={"user.name":"Name","user.email":"Email"},this.orderBy$=new r.X("user.name"),this.orderDirection$=new r.X($.H.DESC),this.hasNextPage$=new r.X(!1),this.hasPreviousPage$=new r.X(!1),this.paginate$=new r.X(0),this.destroy$=new l.xQ}ngOnInit(){(0,d.aj)(this.orderBy$,this.orderDirection$,this.paginate$,this.searchService.search$).pipe((0,f.R)(this.destroy$),(0,m.w)(()=>this.getUsers())).subscribe()}getUsers(){return(0,d.aj)(this.orderBy$,this.orderDirection$,this.paginate$,this.searchService.search$).pipe((0,b.q)(1),(0,w.b)(([t,e,o,n])=>this.usersGQL.fetch({role:"builder",orderBy:`${e}${t}`,pagination:{page:o},search:n})),(0,x.U)(t=>t.data.users),(0,y.b)(t=>{this.hasNextPage$.next(t.pageInfo.hasNextPage),this.hasPreviousPage$.next(t.pageInfo.hasPreviousPage),this.nextPage=t.pageInfo.nextPage,this.previousPage=t.pageInfo.previousPage,this.dataSource$.next(t.items)}))}openStaffDialog(){const t=this.overlay.position().global().centerHorizontally().centerVertically(),e=this.overlay.scrollStrategies.close();this.dialogRef=this.overlay.create(new u.X_({disposeOnNavigation:!0,scrollStrategy:e,positionStrategy:t,hasBackdrop:!0,panelClass:"bc-dialog",backdropClass:"bc-dialog-backdrop"}));const o=new h.C5(N,null,this.createInjector({staffId:void 0}));this.dialogRef.attach(o).instance.close.pipe((0,b.q)(1)).subscribe(t=>{this.dialogRef.dispose(),t&&this.getUsers().pipe((0,w.b)(()=>this.alertService.show({type:"success",message:"Builder created!"}))).subscribe()})}openEditStaffDialog(t){const e=this.overlay.position().global().centerHorizontally().centerVertically(),o=this.overlay.scrollStrategies.close();this.dialogRef=this.overlay.create(new u.X_({disposeOnNavigation:!0,scrollStrategy:o,positionStrategy:e,hasBackdrop:!0,panelClass:"bc-dialog",backdropClass:"bc-dialog-backdrop"}));const n=new h.C5(N,null,this.createInjector({staffId:t}));this.dialogRef.attach(n).instance.close.pipe((0,b.q)(1)).subscribe(t=>{this.dialogRef.dispose(),t&&this.getUsers().pipe((0,w.b)(()=>this.alertService.show({type:"success",message:"Builder edited!"}))).subscribe()})}showDeleteAlert(t,e,o){return(0,a.mG)(this,void 0,void 0,function*(){const n=yield this.alertController.create({cssClass:"bc-alert-popup",header:"Confirmation",message:`Delete user ${e}?`,buttons:[{text:"Yes",handler:this.deleteUser.bind(this,t,o),cssClass:"action-yes"},{text:"No",role:"cancel",cssClass:"action-no"}]});(0,p.D)(n.present()).subscribe()})}deleteUser(t,e){this.deleteUserGQL.mutate({input:t}).pipe((0,w.b)(()=>this.dataSource$),(0,b.q)(1)).subscribe(t=>{t.splice(e,1),this.dataSource$.next(t)})}changeSorting(t){(0,d.aj)(this.orderBy$,this.orderDirection$).pipe((0,b.q)(1)).subscribe(([e,o])=>{e===t?this.orderDirection$.next(o===$.H.ASC?$.H.DESC:$.H.ASC):this.orderBy$.next(t)})}createInjector(t){const e=new WeakMap;return e.set(Z.ro,t),new h.nK(this.injector,e)}ngOnDestroy(){this.destroy$.next()}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(g.lY),c.Y36(g.t5),c.Y36(s.Br),c.Y36(u.aV),c.Y36(c.zs3),c.Y36(v.c9),c.Y36(U.o))},t.\u0275cmp=c.Xpm({type:t,selectors:[["dfobobcat-admin-user-builder"]],viewQuery:function(t,e){if(1&t&&c.Gf(Q,5,c.SBq),2&t){let t;c.iGM(t=c.CRH())&&(e.componentWrapper=t.first)}},decls:36,vars:11,consts:[[1,"component-wrapper"],["componentWrapper",""],[4,"ngIf"],[1,"desktop-table-wrapper"],["cdk-table","","fixedLayout","",1,"user-table-desktop","builder-table",3,"dataSource"],["cdkColumnDef","photo"],["cdk-header-cell","",4,"cdkHeaderCellDef"],["cdk-cell","",4,"cdkCellDef"],["cdkColumnDef","name"],["cdkColumnDef","email"],["cdkColumnDef","company"],["cdkColumnDef","phone"],["cdkColumnDef","edit"],["cdkColumnDef","delete"],["cdk-header-row","",4,"cdkHeaderRowDef"],["cdk-row","",4,"cdkRowDef","cdkRowDefColumns"],[2,"flex","1 0 auto"],["slot","fixed",1,"add-new-user"],["type","button","expand","block","size","large","shape","round",1,"main-action-btn",3,"click"],["slot","start","src","/assets/icon/users.svg"],[1,"pagination-controls","actions"],[1,"sorting"],[3,"active","click",4,"ngFor","ngForOf"],[1,"pagination"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"prev",3,"click"],["d","M0 0h24v24H0z","fill","none"],["d","M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"next",3,"click"],["d","M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["d","M0 0h24v24H0V0z","fill","none"],["d","m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"],["d","m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"],["cdk-header-cell",""],["cdk-cell",""],[1,"user-icon"],["src","/assets/icon/users.svg","alt",""],["type","button","shape","round",1,"action-btn",3,"click"],["slot","start","src","/assets/icon/edit.svg"],["slot","start","src","/assets/icon/trash.svg"],["cdk-header-row",""],["cdk-row",""]],template:function(t,e){1&t&&(c.TgZ(0,"div",0,1),c.YNc(2,R,12,7,"ng-container",2),c.ALo(3,"async"),c.ALo(4,"async"),c.TgZ(5,"div",3),c.TgZ(6,"table",4),c.ynx(7,5),c.YNc(8,B,2,0,"th",6),c.YNc(9,E,3,0,"td",7),c.BQk(),c.ynx(10,8),c.YNc(11,H,2,0,"th",6),c.YNc(12,j,2,1,"td",7),c.BQk(),c.ynx(13,9),c.YNc(14,z,2,0,"th",6),c.YNc(15,G,2,1,"td",7),c.BQk(),c.ynx(16,10),c.YNc(17,F,2,0,"th",6),c.YNc(18,V,2,1,"td",7),c.BQk(),c.ynx(19,11),c.YNc(20,X,2,0,"th",6),c.YNc(21,W,2,0,"td",7),c.BQk(),c.ynx(22,12),c.YNc(23,K,1,0,"th",6),c.YNc(24,tt,5,0,"td",7),c.BQk(),c.ynx(25,13),c.YNc(26,et,1,0,"th",6),c.YNc(27,ot,5,0,"td",7),c.BQk(),c.YNc(28,nt,1,0,"tr",14),c.YNc(29,st,1,0,"tr",15),c.qZA(),c.qZA(),c._UZ(30,"div",16),c.TgZ(31,"div",17),c.TgZ(32,"ion-button",18),c.NdJ("click",function(){return e.openStaffDialog()}),c._UZ(33,"ion-icon",19),c.TgZ(34,"span"),c._uU(35,"add new builder"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(2),c.Q6J("ngIf",c.WLB(8,it,c.lcZ(3,4,e.hasPreviousPage$),c.lcZ(4,6,e.hasNextPage$))),c.xp6(4),c.Q6J("dataSource",e.dataSource$),c.xp6(22),c.Q6J("cdkHeaderRowDef",e.displayedColumns),c.xp6(1),c.Q6J("cdkRowDefColumns",e.displayedColumns))},directives:[n.O5,Y.zC,Y.fo,Y.D5,Y.O_,Y.s$,Y.Sq,s.YG,s.gu,n.sg,Y.Af,Y.hD,Y.xN,Y._J],pipes:[n.Ov,n.Nd],styles:[".action-btn[_ngcontent-%COMP%]{width:auto;height:2em;font-size:11px;--color:#004853;--border-width:1px;--border-style:solid;--background:#cfd8dc;--background-activated:#cfd8dc;--background-focused:#cfd8dc}.action-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#231f20}.action-btn[_ngcontent-%COMP%]:hover{--background:#193044;--color:#cfd8dc}.action-btn[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#cfd8dc}.user-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#004853}ion-button.action-btn[_ngcontent-%COMP%]{width:auto;height:32px;font-size:11px;line-height:22px;--color:#004853;--border-width:1px;--border-style:solid;--background:#cfd8dc;--background-activated:#cfd8dc;--background-focused:#cfd8dc}.desktop-table-wrapper[_ngcontent-%COMP%]{max-width:1200px;overflow-x:auto}.add-new-user[_ngcontent-%COMP%]{position:fixed;background:#f8fafb;width:100%;height:114px;display:flex;align-items:center;padding-left:48px;bottom:0;margin-left:-48px}.main-action-btn[_ngcontent-%COMP%]{--padding-start:75px;--padding-end:75px;--padding-top:16px;--padding-bottom:16px;--color:#004853}.main-action-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#004853;display:inline-block;margin-right:8px}.main-action-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{letter-spacing:.5px}"],changeDetection:0}),t})();function ct(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-icon",19),c.NdJ("click",function(){return c.CHM(t),c.oxw(2).switchPasswordVisible()}),c.qZA()}}function rt(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-icon",20),c.NdJ("click",function(){return c.CHM(t),c.oxw(2).switchPasswordVisible()}),c.qZA()}}function lt(t,e){if(1&t&&(c.TgZ(0,"bc-input",16),c.YNc(1,ct,1,0,"ion-icon",17),c.YNc(2,rt,1,0,"ion-icon",18),c.qZA()),2&t){const t=c.oxw();c.Q6J("type",t.passwordType)("control",t.form.controls.password)("label","Password"),c.xp6(1),c.Q6J("ngIf",t.showPassword),c.xp6(1),c.Q6J("ngIf",!t.showPassword)}}function dt(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-icon",19),c.NdJ("click",function(){return c.CHM(t),c.oxw(2).switchPasswordVisible()}),c.qZA()}}function pt(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-icon",20),c.NdJ("click",function(){return c.CHM(t),c.oxw(2).switchPasswordVisible()}),c.qZA()}}function gt(t,e){if(1&t&&(c.TgZ(0,"bc-input",21),c.YNc(1,dt,1,0,"ion-icon",17),c.YNc(2,pt,1,0,"ion-icon",18),c.qZA()),2&t){const t=c.oxw();c.Q6J("type",t.passwordType)("control",t.form.controls.repeatPassword)("label","Repeat Password"),c.xp6(1),c.Q6J("ngIf",t.showPassword),c.xp6(1),c.Q6J("ngIf",!t.showPassword)}}function ut(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"bc-select",22),c.NdJ("selected",function(e){return c.CHM(t),c.oxw().roleSelected(e)}),c.qZA()}if(2&t){const t=e.ngIf,o=c.oxw();c.Q6J("options",t)("control",o.role)}}function ht(t,e){1&t&&(c.TgZ(0,"div",23),c._uU(1," Passwords do not match! "),c.qZA())}function ft(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-button",13),c.NdJ("click",function(){return c.CHM(t),c.oxw().copyPassword()}),c.TgZ(1,"span"),c._uU(2),c.ALo(3,"async"),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,1,t.copyPasswordText$))}}function mt(t){return t.charAt(0).toUpperCase()+t.slice(1)}let bt=(()=>{class t{constructor(t,e,o,n,s,i,a,c){this.fb=t,this.dialogData=e,this.userGQL=o,this.staffRolesGQL=n,this.updateUserGQL=s,this.registerGQL=i,this.alertService=a,this.passwordGenerator=c,this.close=new l.xQ,this.passwordType="password",this.showPassword=!1,this.copyPasswordText$=new r.X("copy password"),this.showCopyPassword$=new r.X(!1),this.destroy$=new l.xQ,this.form=t.group({name:["",[k.kI.required]],email:["",[k.kI.required]],role:["",[k.kI.required]],password:[],repeatPassword:[]},{validator:t=>{var e,o;return(null===(e=t.get("password"))||void 0===e?void 0:e.value)===(null===(o=t.get("repeatPassword"))||void 0===o?void 0:o.value)?null:{repeatPassword:!0}}})}roleSelected(t){this.selectedRoleId=t[0]}get role(){return this.form.controls.role}ngOnDestroy(){this.destroy$.next()}ngOnInit(){if(this.roles$=this.staffRolesGQL.fetch().pipe((0,x.U)(t=>{const e={};for(const o of t.data.staffRoles)e[o.id]=mt(o.name);return e})),this.dialogData.staffId)this.userGQL.fetch({id:this.dialogData.staffId}).subscribe(t=>{const e=t.data.user,{role:o}=e,n=(0,a._T)(e,["role"]);this.form.patchValue(Object.assign({role:mt(o.name)},n)),this.roleSelected([o.id])});else{const t=this.passwordGenerator.generate();this.showCopyPassword$.next(!0),this.form.controls.password.valueChanges.pipe((0,f.R)(this.destroy$)).subscribe(()=>this.copyPasswordText$.next("copy password")),this.form.controls.password.setValidators([k.kI.required]),this.form.controls.repeatPassword.setValidators([k.kI.required]),this.form.patchValue({password:t,repeatPassword:t})}}submit(){if(this.form.invalid){for(const t of Object.keys(this.form.controls))this.form.controls[t].markAsDirty();return}const t=this.form.value;if(this.dialogData.staffId)this.updateUserGQL.mutate({input:{name:t.name,email:t.email,roleId:this.selectedRoleId,userId:this.dialogData.staffId}}).subscribe(()=>{this.close.next(!0)});else{if(this.form.hasError("repeatPassword"))return;const e={name:t.name,email:t.email,roleId:this.selectedRoleId,password:t.password};e.roleId=this.selectedRoleId,this.registerGQL.mutate({input:e}).subscribe(()=>{this.close.next(!0)})}}switchPasswordVisible(){this.passwordType="text"===this.passwordType?"password":"text",this.showPassword=!this.showPassword}copyPassword(){const t=document.createElement("textarea");t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0",t.innerText=this.form.controls.password.value,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.copyPasswordText$.next("Done!")}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(k.qu),c.Y36(Z.ro),c.Y36(g.dH),c.Y36(g.N4),c.Y36(g.h4),c.Y36(g.JD),c.Y36(v.c9),c.Y36(v.Tz))},t.\u0275cmp=c.Xpm({type:t,selectors:[["dfobobcat-add-staff-dialog"]],decls:25,vars:13,consts:[[1,"dialog-container"],[1,"dialog-header"],[2,"flex","1 0 auto"],["src","/assets/icon/close.svg",3,"click"],[1,"dialog-body"],["placeholder","Staff name","label","Full name",3,"control"],["placeholder","Staff email","label","E-mail",3,"control"],["theme","light","placeholder","Write your password",3,"type","control","label",4,"ngIf"],["theme","light","placeholder","Repeat your password","enterkeyhint","send",3,"type","control","label",4,"ngIf"],["placeholder","Select staff role","label","Staff role","theme","light",3,"options","control","selected",4,"ngIf"],["class","form-error",4,"ngIf"],[1,"dialog-buttons"],["class","main-action-btn","type","button","expand","block","size","large","shape","round",3,"click",4,"ngIf"],["type","button","expand","block","size","large","shape","round",1,"main-action-btn",3,"click"],["slot","start","src","/assets/icon/users.svg",1,"dark"],["type","button","expand","block","size","large","shape","round",1,"main-action-btn","cancel-btn",3,"click"],["theme","light","placeholder","Write your password",3,"type","control","label"],["class","eye-icon","src","/assets/icon/eye-opened.svg",3,"click",4,"ngIf"],["class","eye-icon","src","/assets/icon/eye-closed.svg",3,"click",4,"ngIf"],["src","/assets/icon/eye-opened.svg",1,"eye-icon",3,"click"],["src","/assets/icon/eye-closed.svg",1,"eye-icon",3,"click"],["theme","light","placeholder","Repeat your password","enterkeyhint","send",3,"type","control","label"],["placeholder","Select staff role","label","Staff role","theme","light",3,"options","control","selected"],[1,"form-error"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"span"),c._uU(3),c.qZA(),c._UZ(4,"div",2),c.TgZ(5,"ion-icon",3),c.NdJ("click",function(){return e.close.next(!1)}),c.qZA(),c.qZA(),c.TgZ(6,"div",4),c._UZ(7,"bc-input",5),c._UZ(8,"bc-input",6),c.YNc(9,lt,3,5,"bc-input",7),c.YNc(10,gt,3,5,"bc-input",8),c.YNc(11,ut,1,2,"bc-select",9),c.ALo(12,"async"),c.qZA(),c.YNc(13,ht,2,0,"div",10),c._UZ(14,"div",2),c.TgZ(15,"div",11),c.YNc(16,ft,4,3,"ion-button",12),c.ALo(17,"async"),c.TgZ(18,"ion-button",13),c.NdJ("click",function(){return e.submit()}),c._UZ(19,"ion-icon",14),c.TgZ(20,"span"),c._uU(21),c.qZA(),c.qZA(),c.TgZ(22,"ion-button",15),c.NdJ("click",function(){return e.close.next(!1)}),c.TgZ(23,"span"),c._uU(24,"cancel"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.hij("",null!=e.dialogData&&e.dialogData.staffId?"Edit user":"Add a new staff"," "),c.xp6(4),c.Q6J("control",e.form.controls.name),c.xp6(1),c.Q6J("control",e.form.controls.email),c.xp6(1),c.Q6J("ngIf",!e.dialogData||!e.dialogData.staffId),c.xp6(1),c.Q6J("ngIf",!e.dialogData||!e.dialogData.staffId),c.xp6(1),c.Q6J("ngIf",c.lcZ(12,9,e.roles$)),c.xp6(2),c.Q6J("ngIf",!e.dialogData.staffId&&e.form.hasError("repeatPassword")),c.xp6(3),c.Q6J("ngIf",c.lcZ(17,11,e.showCopyPassword$)),c.xp6(5),c.hij("",null!=e.dialogData&&e.dialogData.staffId?"edit":"add new"," staff"))},directives:[s.gu,P.am,n.O5,s.YG,P.Hr],pipes:[n.Ov],styles:[".dialog-container[_ngcontent-%COMP%]{min-height:795px;width:425px;background-color:#004853;color:#fff;padding:40px 28px 40px 48px;position:relative;border-radius:8px;display:flex;flex-flow:column nowrap}.dialog-header[_ngcontent-%COMP%]{margin-bottom:35px}bc-input[_ngcontent-%COMP%]{display:block;margin-bottom:22px}.dialog-header[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:center;border-bottom:1px solid #78909c;padding-bottom:15px}.dialog-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#78909c}.dialog-buttons[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap}.dialog-buttons[_ngcontent-%COMP%]:ion-button:first-of-type(){margin-bottom:16px}.main-action-btn[_ngcontent-%COMP%]{--padding-start:75px;--padding-end:75px;--padding-top:16px;--padding-bottom:16px}.main-action-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#000}.main-action-btn[_ngcontent-%COMP%]:native   ion-icon[_ngcontent-%COMP%]{display:inline-block;margin-right:8px}.main-action-btn[_ngcontent-%COMP%]:native   ion-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#000}.main-action-btn[_ngcontent-%COMP%]:native   span[_ngcontent-%COMP%]{letter-spacing:.5px}.cancel-btn[_ngcontent-%COMP%]{--background:transparent;--border-color:var(--ion-color-primary);--border-width:1px;--border-style:solid;--color:var(--ion-color-primary)}"],changeDetection:0}),t})(),wt=(()=>{class t{transform(t){return t.charAt(0).toUpperCase()+t.slice(1)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=c.Yjl({name:"capitalFl",type:t,pure:!0}),t})();const xt=["componentWrapper"];function yt(t,e){1&t&&(c.O4$(),c.TgZ(0,"svg",30),c._UZ(1,"path",31),c._UZ(2,"path",32),c.qZA())}function Zt(t,e){1&t&&(c.O4$(),c.TgZ(0,"svg",30),c._UZ(1,"path",31),c._UZ(2,"path",33),c.qZA())}function vt(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"li",28),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw(2).changeSorting(e.key)}),c.ALo(1,"async"),c.TgZ(2,"span"),c._uU(3),c.qZA(),c.YNc(4,yt,3,0,"svg",29),c.ALo(5,"async"),c.YNc(6,Zt,3,0,"svg",29),c.ALo(7,"async"),c.qZA()}if(2&t){const t=e.$implicit,o=c.oxw(2);c.ekj("active",c.lcZ(1,5,o.orderBy$)===t.key),c.xp6(3),c.Oqu(t.value),c.xp6(1),c.Q6J("ngIf",c.lcZ(5,7,o.orderDirection$)===o.ORDER_DIRECTION.ASC),c.xp6(2),c.Q6J("ngIf",c.lcZ(7,9,o.orderDirection$)===o.ORDER_DIRECTION.DESC)}}function kt(t,e){if(1&t){const t=c.EpF();c.ynx(0),c.TgZ(1,"div",19),c.TgZ(2,"ul",20),c.YNc(3,vt,8,11,"li",21),c.ALo(4,"keyvalue"),c.qZA(),c.TgZ(5,"div",22),c.O4$(),c.TgZ(6,"svg",23),c.NdJ("click",function(){const e=c.CHM(t).ngIf,o=c.oxw();return e.hasPreviousPage?o.paginate$.next(o.previousPage):null}),c._UZ(7,"path",24),c._UZ(8,"path",25),c.qZA(),c.TgZ(9,"svg",26),c.NdJ("click",function(){const e=c.CHM(t).ngIf,o=c.oxw();return e.hasNextPage?o.paginate$.next(o.nextPage):null}),c._UZ(10,"path",24),c._UZ(11,"path",27),c.qZA(),c.qZA(),c.qZA(),c.BQk()}if(2&t){const t=e.ngIf,o=c.oxw();c.xp6(3),c.Q6J("ngForOf",c.lcZ(4,5,o.orderKeys)),c.xp6(3),c.ekj("disabled",!t.hasPreviousPage),c.xp6(3),c.ekj("disabled",!t.hasNextPage)}}function Pt(t,e){1&t&&(c.TgZ(0,"th",34),c._uU(1,"Photo"),c.qZA())}function Ct(t,e){1&t&&(c.TgZ(0,"td",35),c.TgZ(1,"div",36),c._UZ(2,"ion-icon",37),c.qZA(),c.qZA())}function _t(t,e){1&t&&(c.TgZ(0,"th",34),c._uU(1,"Name"),c.qZA())}function At(t,e){if(1&t&&(c.TgZ(0,"td",35),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.hij(" ",t.name," ")}}function Ot(t,e){1&t&&(c.TgZ(0,"th",34),c._uU(1,"E-Mail"),c.qZA())}function qt(t,e){if(1&t&&(c.TgZ(0,"td",35),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.hij(" ",t.email," ")}}function Tt(t,e){1&t&&(c.TgZ(0,"th",34),c._uU(1,"Role"),c.qZA())}function Mt(t,e){if(1&t&&(c.TgZ(0,"td",35),c._uU(1),c.ALo(2,"capitalFl"),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.hij(" ",c.lcZ(2,1,t.role.name)," ")}}function It(t,e){1&t&&c._UZ(0,"th",34)}function Dt(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"td",35),c.TgZ(1,"ion-button",38),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().openEditStaffDialog(e.id)}),c._UZ(2,"ion-icon",39),c.TgZ(3,"span"),c._uU(4,"edit"),c.qZA(),c.qZA(),c.qZA()}}function Nt(t,e){1&t&&c._UZ(0,"th",34)}function $t(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"td",35),c.TgZ(1,"ion-button",38),c.NdJ("click",function(){const e=c.CHM(t),o=e.$implicit,n=e.index;return c.oxw().showDeleteAlert(o.id,o.name,n)}),c._UZ(2,"ion-icon",40),c.TgZ(3,"span"),c._uU(4,"delete"),c.qZA(),c.qZA(),c.qZA()}}function Ut(t,e){1&t&&c._UZ(0,"tr",41)}function Yt(t,e){1&t&&c._UZ(0,"tr",42)}const Qt=function(t,e){return{hasPreviousPage:t,hasNextPage:e}};let St=(()=>{class t{constructor(t,e,o,n,s,i,a){this.usersGQL=t,this.overlay=e,this.injector=o,this.alertService=n,this.alertController=s,this.deleteUserGQL=i,this.searchService=a,this.dataSource$=new r.X([]),this.displayedColumns=["photo","name","email","role","edit","delete"],this.ORDER_DIRECTION=$.H,this.orderKeys={"user.name":"Name","user.email":"Email","role.name":"Role"},this.orderBy$=new r.X("user.name"),this.orderDirection$=new r.X($.H.DESC),this.hasNextPage$=new r.X(!1),this.hasPreviousPage$=new r.X(!1),this.paginate$=new r.X(0),this.destroy$=new l.xQ}ngOnInit(){(0,d.aj)(this.orderBy$,this.orderDirection$,this.paginate$,this.searchService.search$).pipe((0,f.R)(this.destroy$),(0,m.w)(()=>this.getUsers())).subscribe()}getUsers(){return(0,d.aj)(this.orderBy$,this.orderDirection$,this.paginate$,this.searchService.search$).pipe((0,b.q)(1),(0,w.b)(([t,e,o,n])=>this.usersGQL.fetch({role:"staff",orderBy:`${e}${t}`,pagination:{page:o},search:n})),(0,x.U)(t=>t.data.users),(0,y.b)(t=>{this.hasNextPage$.next(t.pageInfo.hasNextPage),this.hasPreviousPage$.next(t.pageInfo.hasPreviousPage),this.nextPage=t.pageInfo.nextPage,this.previousPage=t.pageInfo.previousPage,this.dataSource$.next(t.items)}))}openStaffDialog(){const t=this.overlay.position().global().centerHorizontally().centerVertically(),e=this.overlay.scrollStrategies.close();this.dialogRef=this.overlay.create(new u.X_({disposeOnNavigation:!0,scrollStrategy:e,positionStrategy:t,hasBackdrop:!0,panelClass:"bc-dialog",backdropClass:"bc-dialog-backdrop"}));const o=new h.C5(bt,null,this.createInjector({staffId:void 0}));this.dialogRef.attach(o).instance.close.pipe((0,b.q)(1)).subscribe(t=>{this.dialogRef.dispose(),t&&this.getUsers().pipe((0,w.b)(()=>this.alertService.show({type:"success",message:"Staff user created!"}))).subscribe()})}openEditStaffDialog(t){const e=this.overlay.position().global().centerHorizontally().centerVertically(),o=this.overlay.scrollStrategies.close();this.dialogRef=this.overlay.create(new u.X_({disposeOnNavigation:!0,scrollStrategy:o,positionStrategy:e,hasBackdrop:!0,panelClass:"bc-dialog",backdropClass:"bc-dialog-backdrop"}));const n=new h.C5(bt,null,this.createInjector({staffId:t}));this.dialogRef.attach(n).instance.close.pipe((0,b.q)(1)).subscribe(t=>{this.dialogRef.dispose(),t&&this.getUsers().pipe((0,w.b)(()=>this.alertService.show({type:"success",message:"Staff user edited!"}))).subscribe()})}showDeleteAlert(t,e,o){return(0,a.mG)(this,void 0,void 0,function*(){const n=yield this.alertController.create({cssClass:"bc-alert-popup",header:"Confirmation",message:`Delete user ${e}?`,buttons:[{text:"Yes",handler:this.deleteUser.bind(this,t,o),cssClass:"action-yes"},{text:"No",role:"cancel",cssClass:"action-no"}]});(0,p.D)(n.present()).subscribe()})}deleteUser(t,e){this.deleteUserGQL.mutate({input:t}).pipe((0,w.b)(()=>this.dataSource$),(0,b.q)(1)).subscribe(t=>{t.splice(e,1),this.dataSource$.next(t)})}changeSorting(t){(0,d.aj)(this.orderBy$,this.orderDirection$).pipe((0,b.q)(1)).subscribe(([e,o])=>{e===t?this.orderDirection$.next(o===$.H.ASC?$.H.DESC:$.H.ASC):this.orderBy$.next(t)})}createInjector(t){const e=new WeakMap;return e.set(Z.ro,t),new h.nK(this.injector,e)}ngOnDestroy(){this.destroy$.next()}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(g.lY),c.Y36(u.aV),c.Y36(c.zs3),c.Y36(v.c9),c.Y36(s.Br),c.Y36(g.t5),c.Y36(U.o))},t.\u0275cmp=c.Xpm({type:t,selectors:[["dfobobcat-admin-user-staff"]],viewQuery:function(t,e){if(1&t&&c.Gf(xt,5,c.SBq),2&t){let t;c.iGM(t=c.CRH())&&(e.componentWrapper=t.first)}},decls:33,vars:11,consts:[[1,"component-wrapper"],["componentWrapper",""],[4,"ngIf"],[1,"desktop-table-wrapper"],["cdk-table","","fixedLayout","",1,"user-table-desktop",3,"dataSource"],["cdkColumnDef","photo"],["cdk-header-cell","",4,"cdkHeaderCellDef"],["cdk-cell","",4,"cdkCellDef"],["cdkColumnDef","name"],["cdkColumnDef","email"],["cdkColumnDef","role"],["cdkColumnDef","edit"],["cdkColumnDef","delete"],["cdk-header-row","",4,"cdkHeaderRowDef"],["cdk-row","",4,"cdkRowDef","cdkRowDefColumns"],[2,"flex","1 0 auto"],["slot","fixed",1,"add-new-user"],["type","button","expand","block","size","large","shape","round",1,"main-action-btn",3,"click"],["slot","start","src","/assets/icon/users.svg"],[1,"pagination-controls","actions"],[1,"sorting"],[3,"active","click",4,"ngFor","ngForOf"],[1,"pagination"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"prev",3,"click"],["d","M0 0h24v24H0z","fill","none"],["d","M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"next",3,"click"],["d","M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],[3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["d","M0 0h24v24H0V0z","fill","none"],["d","m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"],["d","m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"],["cdk-header-cell",""],["cdk-cell",""],[1,"user-icon"],["src","/assets/icon/users.svg","alt",""],["type","button","shape","round",1,"action-btn",3,"click"],["slot","start","src","/assets/icon/edit.svg"],["slot","start","src","/assets/icon/trash.svg"],["cdk-header-row",""],["cdk-row",""]],template:function(t,e){1&t&&(c.TgZ(0,"div",0,1),c.YNc(2,kt,12,7,"ng-container",2),c.ALo(3,"async"),c.ALo(4,"async"),c.TgZ(5,"div",3),c.TgZ(6,"table",4),c.ynx(7,5),c.YNc(8,Pt,2,0,"th",6),c.YNc(9,Ct,3,0,"td",7),c.BQk(),c.ynx(10,8),c.YNc(11,_t,2,0,"th",6),c.YNc(12,At,2,1,"td",7),c.BQk(),c.ynx(13,9),c.YNc(14,Ot,2,0,"th",6),c.YNc(15,qt,2,1,"td",7),c.BQk(),c.ynx(16,10),c.YNc(17,Tt,2,0,"th",6),c.YNc(18,Mt,3,3,"td",7),c.BQk(),c.ynx(19,11),c.YNc(20,It,1,0,"th",6),c.YNc(21,Dt,5,0,"td",7),c.BQk(),c.ynx(22,12),c.YNc(23,Nt,1,0,"th",6),c.YNc(24,$t,5,0,"td",7),c.BQk(),c.YNc(25,Ut,1,0,"tr",13),c.YNc(26,Yt,1,0,"tr",14),c.qZA(),c.qZA(),c._UZ(27,"div",15),c.TgZ(28,"div",16),c.TgZ(29,"ion-button",17),c.NdJ("click",function(){return e.openStaffDialog()}),c._UZ(30,"ion-icon",18),c.TgZ(31,"span"),c._uU(32,"add new staff"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(2),c.Q6J("ngIf",c.WLB(8,Qt,c.lcZ(3,4,e.hasPreviousPage$),c.lcZ(4,6,e.hasNextPage$))),c.xp6(4),c.Q6J("dataSource",e.dataSource$),c.xp6(19),c.Q6J("cdkHeaderRowDef",e.displayedColumns),c.xp6(1),c.Q6J("cdkRowDefColumns",e.displayedColumns))},directives:[n.O5,Y.zC,Y.fo,Y.D5,Y.O_,Y.s$,Y.Sq,s.YG,s.gu,n.sg,Y.Af,Y.hD,Y.xN,Y._J],pipes:[n.Ov,n.Nd,wt],styles:[".action-btn[_ngcontent-%COMP%]{width:auto;height:2em;font-size:11px;--color:#004853;--border-width:1px;--border-style:solid;--background:#cfd8dc;--background-activated:#cfd8dc;--background-focused:#cfd8dc}.action-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#231f20}.action-btn[_ngcontent-%COMP%]:hover{--background:#193044;--color:#cfd8dc}.action-btn[_ngcontent-%COMP%]:hover   ion-icon[_ngcontent-%COMP%]{color:#cfd8dc}.user-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#004853}ion-button.action-btn[_ngcontent-%COMP%]{width:auto;height:32px;font-size:11px;line-height:22px;--color:#004853;--border-width:1px;--border-style:solid;--background:#cfd8dc;--background-activated:#cfd8dc;--background-focused:#cfd8dc}.desktop-table-wrapper[_ngcontent-%COMP%]{max-width:1200px;overflow-x:auto}.add-new-user[_ngcontent-%COMP%]{position:fixed;background:#f8fafb;width:100%;height:114px;display:flex;align-items:center;padding-left:48px;bottom:0;margin-left:-48px}.main-action-btn[_ngcontent-%COMP%]{--padding-start:75px;--padding-end:75px;--padding-top:16px;--padding-bottom:16px;--color:#004853}.main-action-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#004853;display:inline-block;margin-right:8px}.main-action-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{letter-spacing:.5px}"],changeDetection:0}),t})();var Jt=o(6610);const Lt=function(){return["/admin","users","staff"]},Rt=function(){return["/admin","users","builder"]},Bt=[{path:"",component:(()=>{class t{constructor(t,e){this.fb=t,this.router=e,this.searchSubmit$=new l.xQ,this.destroy$=new l.xQ,this.searchForm=this.fb.group({searchCtrl:[""]})}ngOnInit(){}ngOnDestroy(){this.destroy$.next()}get searchCtrl(){return this.searchForm.get("searchCtrl")}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(k.qu),c.Y36(i.F0))},t.\u0275cmp=c.Xpm({type:t,selectors:[["dfobobcat-admin-user-tabs"]],decls:11,vars:4,consts:[["routerLinkActive","router-link-active",3,"routerLink"]],template:function(t,e){1&t&&(c.TgZ(0,"bc-admin-header"),c._uU(1,"Users"),c.qZA(),c.TgZ(2,"nav"),c.TgZ(3,"ul"),c.TgZ(4,"li",0),c.TgZ(5,"a"),c._uU(6,"Staff"),c.qZA(),c.qZA(),c.TgZ(7,"li",0),c.TgZ(8,"a"),c._uU(9,"Builders"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(10,"router-outlet")),2&t&&(c.xp6(4),c.Q6J("routerLink",c.DdM(2,Lt)),c.xp6(3),c.Q6J("routerLink",c.DdM(3,Rt)))},directives:[Jt.W,i.Od,s.YI,i.rH,i.lC],styles:[".dashboard-header[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:center;justify-content:space-between;padding:0 86px 0 48px;height:108px}.dashboard-header[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{height:50px;width:327px;margin-right:85px}.dashboard-header[_ngcontent-%COMP%]   bc-input[_ngcontent-%COMP%]{margin-right:85px}.dashboard-header[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:30px;line-height:36px}nav[_ngcontent-%COMP%]{border-bottom:1px solid #cfd8dc}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:center;justify-content:flex-start;list-style-type:none;padding-left:72px;margin:0}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-right:62px;cursor:pointer}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{font-size:20px;line-height:24px;padding-bottom:10px;color:#78909c;text-decoration:none;display:block;min-width:136px}nav[_ngcontent-%COMP%]   li.router-link-active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{border-bottom:2px solid #004853;color:#193044}"],changeDetection:0}),t})(),children:[{path:"",redirectTo:"staff",pathMatch:"full"},{path:"staff",component:St},{path:"builder",component:at}]}];let Et=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[i.Bz.forChild(Bt)],i.Bz]}),t})();var Ht=o(5967),jt=o(6731);let zt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[n.ez,s.Pc,i.Bz,Et,Ht.C,k.UX,Y.HT,u.U8,jt.k]]}),t})()}}]);