(self.webpackChunkdfobobcat=self.webpackChunkdfobobcat||[]).push([[8705],{8705:(t,e,s)=>{"use strict";s.r(e),s.d(e,{JobsPageModule:()=>v});var n=s(2057),o=s(3738),i=s(3498),c=s(8535),r=s(4705),a=s(9765),u=s(6215),l=s(6682),b=s(3342),h=s(6782),g=s(3190),d=s(5257),p=s(8002),f=s(793),m=s(4694);function x(t,e){1&t&&(f.TgZ(0,"h2"),f._uU(1,"Assigned Requests"),f.qZA())}function J(t,e){1&t&&(f.TgZ(0,"h2"),f._uU(1,"Unassigned Requests"),f.qZA())}function Z(t,e){1&t&&(f.TgZ(0,"h2"),f._uU(1,"Cancelled Requests"),f.qZA())}function j(t,e){1&t&&(f.TgZ(0,"div",13),f._uU(1," We didn't find any jobs. "),f.qZA())}function C(t,e){if(1&t){const t=f.EpF();f.TgZ(0,"bc-job-card-builder",16),f.NdJ("cancelled",function(e){return f.CHM(t),f.oxw(3).jobCancelled(e)})("updateJob",function(){return f.CHM(t),f.oxw(3).updateJobs()}),f.qZA()}if(2&t){const t=e.$implicit;f.Q6J("index",e.index)("status",t.status)("job",t)}}function w(t,e){if(1&t&&(f.TgZ(0,"div",14),f.YNc(1,C,1,3,"bc-job-card-builder",15),f.qZA()),2&t){const t=f.oxw().ngIf;f.xp6(1),f.Q6J("ngForOf",t.items)}}function q(t,e){if(1&t&&(f.ynx(0),f.YNc(1,j,2,0,"div",11),f.YNc(2,w,2,1,"div",12),f.BQk()),2&t){const t=e.ngIf;f.xp6(1),f.Q6J("ngIf",!t.items||!t.items.length),f.xp6(1),f.Q6J("ngIf",t.items&&t.items.length)}}const y=function(t){return{items:t}},S=function(){return["/builder","single-job"]},A=[{path:"",component:(()=>{class t{constructor(t,e){this.myJobRequestsGQL=t,this.fb=e,this.selectedStatus=r.By.Pending,this.searchSubmit$=new a.xQ,this.perfectScrollbarConfig={},this.jobStatus=r.By,this.jobs$=new u.X([]),this.statusChanges$=new u.X(r.By.Pending),this.destroy$=new a.xQ,this.searchForm=this.fb.group({searchCtrl:[""]})}get searchCtrl(){return this.searchForm.get("searchCtrl")}ionViewWillEnter(){this.getJobs().subscribe(t=>{this.jobs$.next(t)}),(0,l.T)(this.searchSubmit$,this.statusChanges$.pipe((0,b.b)(t=>this.selectedStatus=t))).pipe((0,h.R)(this.destroy$),(0,g.w)(()=>this.getJobs()),(0,b.b)(t=>{this.jobs$.next(t)})).subscribe()}jobCancelled(t){this.jobs$.pipe((0,d.q)(1)).subscribe(e=>{e.splice(t,1),this.jobs$.next(e)})}getJobs(){return this.myJobRequestsGQL.fetch({search:this.searchCtrl.value,status:this.selectedStatus}).pipe((0,p.U)(t=>"jobRequests"in t.data.me?t.data.me.jobRequests:[]))}ionViewWillLeave(){this.destroy$.next()}updateJobs(){this.getJobs().subscribe(t=>{this.jobs$.next(t)})}}return t.\u0275fac=function(e){return new(e||t)(f.Y36(r.Lf),f.Y36(o.qu))},t.\u0275cmp=f.Xpm({type:t,selectors:[["bc-jobs"]],decls:20,vars:15,consts:[[3,"scrollY"],[1,"page-wrapper"],[3,"formGroup","submit"],["type","search","inputmode","search","placeholder","What are you looking for?..","label","Search","theme","dark",3,"control","keyup.enter"],["src","/assets/icon/search.svg"],[3,"initial","selected"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngIf"],["type","button","expand","block","size","large","shape","round",1,"main-action-btn",3,"routerLink"],["slot","start","src","/assets/icon/document.svg"],["class","no-items-found",4,"ngIf"],["class","job-scroll",4,"ngIf"],[1,"no-items-found"],[1,"job-scroll"],[3,"index","status","job","cancelled","updateJob",4,"ngFor","ngForOf"],[3,"index","status","job","cancelled","updateJob"]],template:function(t,e){1&t&&(f._UZ(0,"bc-header"),f.TgZ(1,"ion-content",0),f.TgZ(2,"div",1),f.TgZ(3,"h1"),f._uU(4,"Job requests"),f.qZA(),f.TgZ(5,"form",2),f.NdJ("submit",function(){return e.searchSubmit$.next()}),f.TgZ(6,"bc-input",3),f.NdJ("keyup.enter",function(){return e.searchSubmit$.next()}),f._UZ(7,"ion-icon",4),f.qZA(),f.qZA(),f.TgZ(8,"div"),f.TgZ(9,"bc-status-selector",5),f.NdJ("selected",function(t){return e.statusChanges$.next(t)}),f.qZA(),f.qZA(),f.ynx(10,6),f.YNc(11,x,2,0,"h2",7),f.YNc(12,J,2,0,"h2",7),f.YNc(13,Z,2,0,"h2",7),f.BQk(),f.YNc(14,q,3,2,"ng-container",8),f.ALo(15,"async"),f.TgZ(16,"ion-button",9),f._UZ(17,"ion-icon",10),f.TgZ(18,"span"),f._uU(19,"new request"),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(1),f.Q6J("scrollY",!0),f.xp6(4),f.Q6J("formGroup",e.searchForm),f.xp6(1),f.Q6J("control",e.searchCtrl),f.xp6(3),f.Q6J("initial",e.selectedStatus),f.xp6(1),f.Q6J("ngSwitch",e.selectedStatus),f.xp6(1),f.Q6J("ngSwitchCase",e.jobStatus.Assigned),f.xp6(1),f.Q6J("ngSwitchCase",e.jobStatus.Pending),f.xp6(1),f.Q6J("ngSwitchCase",e.jobStatus.Cancelled),f.xp6(1),f.Q6J("ngIf",f.VKq(12,y,f.lcZ(15,10,e.jobs$))),f.xp6(2),f.Q6J("routerLink",f.DdM(14,S)))},directives:[m.Gt,i.W2,o._Y,o.JL,o.sg,m.am,i.gu,m.MM,n.RF,n.n9,n.O5,i.YG,i.YI,c.rH,n.sg,m.Ob],pipes:[n.Ov],styles:["[_nghost-%COMP%]{height:100%}.page-wrapper[_ngcontent-%COMP%]{height:auto;min-height:100%}bc-job-card-builder[_ngcontent-%COMP%]{display:block;margin-bottom:24px}.job-scroll[_ngcontent-%COMP%]{margin-bottom:18px;min-height:25.75rem;height:25.75rem;overflow:auto}ion-button[_ngcontent-%COMP%]{min-height:46px}.job-scroll[_ngcontent-%COMP%]{position:relative}.job-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px;display:none}.job-scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:20px}"],changeDetection:0}),t})()}];let Q=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[[c.Bz.forChild(A)],c.Bz]}),t})();var $=s(5967),_=s(3707);let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[[n.ez,o.u5,o.UX,i.Pc,Q,$.C,_.Xd]]}),t})()}}]);