(self.webpackChunkdfobobcat=self.webpackChunkdfobobcat||[]).push([[5938],{5938:(o,t,n)=>{"use strict";n.r(t),n.d(t,{LoginPageModule:()=>y});var e=n(2057),s=n(3738),i=n(8497),r=n(3498),c=n(8535),a=n(4762),l=n(4705),u=n(7422),p=n(793),d=n(4694);function g(o,t){if(1&o){const o=p.EpF();p.TgZ(0,"ion-icon",10),p.NdJ("click",function(){return p.CHM(o),p.oxw().switchPasswordVisible()}),p.qZA()}}function m(o,t){if(1&o){const o=p.EpF();p.TgZ(0,"ion-icon",11),p.NdJ("click",function(){return p.CHM(o),p.oxw().switchPasswordVisible()}),p.qZA()}}const f=function(){return["/auth","forgot-password"]},h=[{path:"",component:(()=>{class o{constructor(o,t,n,e){this.loginGQL=o,this.fb=t,this.router=n,this.state=e,this.passwordType="password",this.showPassword=!1,this.form=this.fb.group({email:["",[s.kI.email,s.kI.required]],password:["",s.kI.required]})}onSubmit(){return(0,a.mG)(this,void 0,void 0,function*(){if(this.form.invalid)for(const o of Object.keys(this.form.controls))this.form.controls[o].markAsDirty();else this.loginGQL.mutate({input:this.form.value}).subscribe(o=>{var t,n,e;if(console.log("111111111111111"),null===(t=o.data)||void 0===t?void 0:t.login){const{name:t,email:s}=null===(n=o.data)||void 0===n?void 0:n.login,i=null===(e=o.data)||void 0===e?void 0:e.login.role.name;this.state.setState("user",{name:t,role:i,email:s},!0).subscribe(),i===l.GD.Laborer||i===l.GD.Operator?this.router.navigate(["/staff","jobs"]):i===l.GD.Builder?this.router.navigate(["/builder","jobs"]):i===l.GD.Admin&&this.router.navigate(["/admin"])}})})}switchPasswordVisible(){this.passwordType="text"===this.passwordType?"password":"text",this.showPassword=!this.showPassword}}return o.\u0275fac=function(t){return new(t||o)(p.Y36(l.me),p.Y36(s.qu),p.Y36(c.F0),p.Y36(u.b2))},o.\u0275cmp=p.Xpm({type:o,selectors:[["bc-login-page"]],decls:17,vars:10,consts:[["action","",3,"formGroup","submit"],["theme","light","placeholder","Your email",3,"control","label"],["enterkeyhint","send","theme","light","placeholder","Your password",3,"type","control","label","keyup.enter"],["class","eye-icon","src","/assets/icon/eye-opened.svg",3,"click",4,"ngIf"],["class","eye-icon","src","/assets/icon/eye-closed.svg",3,"click",4,"ngIf"],[1,"forgot-password"],[3,"routerLink"],[2,"flex","1 0 auto"],["type","submit","expand","block","size","large","shape","round",1,"main-action-btn"],["slot","start","src","/assets/icon/send.svg"],["src","/assets/icon/eye-opened.svg",1,"eye-icon",3,"click"],["src","/assets/icon/eye-closed.svg",1,"eye-icon",3,"click"]],template:function(o,t){1&o&&(p.TgZ(0,"h1"),p._uU(1,"Login"),p.qZA(),p.TgZ(2,"form",0),p.NdJ("submit",function(){return t.onSubmit()}),p._UZ(3,"bc-input",1),p.TgZ(4,"bc-input",2),p.NdJ("keyup.enter",function(){return t.onSubmit()}),p.YNc(5,g,1,0,"ion-icon",3),p.YNc(6,m,1,0,"ion-icon",4),p.qZA(),p.TgZ(7,"ion-text",5),p._uU(8,"Please "),p.TgZ(9,"a",6),p._uU(10,"CLICK HERE"),p.qZA(),p._uU(11," if you\u2019ve forgot a password."),p.qZA(),p._UZ(12,"div",7),p.TgZ(13,"ion-button",8),p._UZ(14,"ion-icon",9),p.TgZ(15,"span"),p._uU(16,"send"),p.qZA(),p.qZA(),p.qZA()),2&o&&(p.xp6(2),p.Q6J("formGroup",t.form),p.xp6(1),p.Q6J("control",t.form.controls.email)("label","Email"),p.xp6(1),p.Q6J("type",t.passwordType)("control",t.form.controls.password)("label","Password"),p.xp6(1),p.Q6J("ngIf",t.showPassword),p.xp6(1),p.Q6J("ngIf",!t.showPassword),p.xp6(3),p.Q6J("routerLink",p.DdM(9,f)))},directives:[s._Y,s.JL,s.sg,d.am,e.O5,r.yW,c.yS,r.YI,r.YG,r.gu],styles:["[_nghost-%COMP%]{background-color:transparent;display:flex;flex-direction:column;min-height:100%;flex:1 0 auto}form[_ngcontent-%COMP%]{min-height:100%;flex:1 0 auto;display:flex;flex-direction:column;padding:16px 0 0}form[_ngcontent-%COMP%]   bc-input[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:35px;display:block}h1[_ngcontent-%COMP%]{margin-bottom:27px}.forgot-password[_ngcontent-%COMP%]{display:block;margin-top:16px}ion-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:28px}ion-button[type=submit][_ngcontent-%COMP%]{font-weight:500}ion-button[type=submit][_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-bottom:-5px}.input-icon-wrapper[_ngcontent-%COMP%]{right:11px}.main-action-btn[_ngcontent-%COMP%]{margin-top:48px}"],changeDetection:0}),o})()}];let b=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=p.oAB({type:o}),o.\u0275inj=p.cJS({imports:[[c.Bz.forChild(h)],c.Bz]}),o})();var w=n(5967);let y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=p.oAB({type:o}),o.\u0275inj=p.cJS({imports:[[e.ez,s.u5,r.Pc,b,s.u5,s.UX,w.C,i.JF]]}),o})()}}]);